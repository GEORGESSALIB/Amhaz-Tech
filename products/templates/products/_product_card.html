<div class="col-xl-3 col-lg-4 col-md-6">
  <div class="card h-100 border-0 position-relative overflow-hidden">

    {% if product.photo %}
      <img src="{{ product.photo.url }}"
           class="card-img-top"
           alt="{{ product.name }}">
    {% endif %}

    <div class="card-body d-flex flex-column p-3">

      <h5 class="product-title text-truncate" title="{{ product.name }}">
        {{ product.name }}
      </h5>

      <p class="product-desc">
        {{ product.description|truncatechars:80 }}
      </p>

      <div class="mb-2">
        <span class="product-price">${{ product.price }}</span>
      </div>

      <div class="mb-3 d-flex flex-wrap gap-1">
        {% if product.cached_quantity == 0 %}
          <span class="badge bg-danger-subtle text-danger">Out of stock</span>
        {% elif product.cached_quantity <= 10 %}
          <span class="badge bg-warning-subtle text-warning">Low stock</span>
        {% else %}
          <span class="badge bg-success-subtle text-success">In stock</span>
        {% endif %}
      </div>

      <div class="mt-auto"></div>

      {% if product.cached_quantity > 0 %}
        <form class="add-to-cart-form"
              data-product-id="{{ product.id }}"
              onsubmit="return false;">
          {% csrf_token %}
          <button type="button"
                  class="btn btn-primary w-100 add-to-cart-btn">
            Add to Cart
          </button>
        </form>
      {% else %}
        <button class="btn btn-secondary w-100" disabled>
          Unavailable
        </button>
      {% endif %}

    </div>
  </div>
</div>
